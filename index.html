<!-- Firebase + JS -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script>
    // Configurația proiectului tău Firebase
    const firebaseConfig = {
        apiKey: "AIzaSyB8IUYlmq4kceZhC3gp6e8Mk9G7eLzrYvM",
        authDomain: "minimag-7ad90.firebaseapp.com",
        projectId: "minimag-7ad90",
        storageBucket: "minimag-7ad90.firebasestorage.app",
        messagingSenderId: "685055029064",
        appId: "1:685055029064:web:8e2fe8f8b689245dd24d7d",
        measurementId: "G-SCMXR51H2G"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Încarcă produsele în timp real
    const productsDiv = document.getElementById('products');
    db.collection('products').onSnapshot(snapshot => {
        productsDiv.innerHTML = '';
        snapshot.forEach(doc => {
            const data = doc.data();
            const card = `
                <div class="product-card">
                    <img src="${data.image}" alt="${data.title}">
                    <h3>${data.title}</h3>
                    <p class="product-desc">${data.description || ''}</p>
                    <p class="price">${data.price} RON</p>
                    <button onclick="addToCart('${data.title}', ${data.price})">Adaugă în coș</button>
                </div>
            `;
            productsDiv.innerHTML += card;
        });
    });

    // Funcție pentru a adăuga produse
    function addProduct() {
        const title = document.getElementById('title').value;
        const description = document.getElementById('description').value;
        const price = parseFloat(document.getElementById('price').value);
        const image = document.getElementById('image').value;

        if(title && description && price && image){
            db.collection('products').add({ title, description, price, image })
              .then(() => alert('Produs adăugat cu succes!'))
              .catch(err => alert(err));
        } else {
            alert('Completează toate câmpurile!');
        }
    }

    // Coș simplu
    let cart = [];
    function addToCart(title, price) {
        cart.push({ title, price });
        document.getElementById('cart-count').innerText = cart.length;
        renderCart();
    }
    function renderCart() {
        const cartItems = document.getElementById('cart-items');
        cartItems.innerHTML = '';
        let total = 0;
        cart.forEach(item => {
            cartItems.innerHTML += `<li>${item.title} - ${item.price} RON</li>`;
            total += item.price;
        });
        document.getElementById('cart-total').innerText = total;
    }
    document.getElementById('view-cart-btn').onclick = () => document.getElementById('cart-container').style.display = 'block';
    document.getElementById('close-cart').onclick = () => document.getElementById('cart-container').style.display = 'none';
</script>
